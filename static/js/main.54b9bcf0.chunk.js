(this["webpackJsonpreact-jwt-auth"]=this["webpackJsonpreact-jwt-auth"]||[]).push([[0],{153:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(53),l=a.n(s),c=a(9),o=(a(62),a(3)),i=a(4),m=a(11),u=a(10),d=a(6),h=a(12),v=a(15),g=(a(63),a(64),a(17)),f=a.n(g),p="http://localhost:8080/api/auth/",E=new(function(){function e(){Object(o.a)(this,e)}return Object(i.a)(e,[{key:"login",value:function(e,t){return f.a.post(p+"signin",{username:e,password:t}).then((function(e){return e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))}},{key:"logout",value:function(){localStorage.removeItem("user")}},{key:"register",value:function(e,t,a){return f.a.post(p+"signup",{username:e,email:t,password:a})}},{key:"getCurrentUser",value:function(){return JSON.parse(localStorage.getItem("user"))}}]),e}()),b=a(22),N=a.n(b),O=a(18),w=a.n(O),y=a(23),k=a.n(y),j=function(e){if(!e)return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"This field is required!")},S=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleLogin=a.handleLogin.bind(Object(d.a)(a)),a.onChangeUsername=a.onChangeUsername.bind(Object(d.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(d.a)(a)),a.state={username:"",password:"",loading:!1,message:""},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleLogin",value:function(e){var t=this;e.preventDefault(),this.setState({message:"",loading:!0}),this.form.validateAll(),0===this.checkBtn.context._errors.length?E.login(this.state.username,this.state.password).then((function(){t.props.history.push("/profile"),window.location.reload()}),(function(e){var a=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();t.setState({loading:!1,message:a})})):this.setState({loading:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"card card-container"},r.a.createElement("img",{src:"https://www.kindpng.com/picc/m/22-223941_transparent-avatar-png-male-avatar-icon-transparent-png.png",alt:"profile-img",className:"profile-img-card"}),r.a.createElement(N.a,{onSubmit:this.handleLogin,ref:function(t){e.form=t}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement(w.a,{type:"text",className:"form-control",name:"username",value:this.state.username,onChange:this.onChangeUsername,validations:[j]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement(w.a,{type:"password",className:"form-control",name:"password",value:this.state.password,onChange:this.onChangePassword,validations:[j]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block",disabled:this.state.loading},this.state.loading&&r.a.createElement("span",{className:"spinner-border spinner-border-sm"}),r.a.createElement("span",null,"Login"))),this.state.message&&r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"alert alert-danger",role:"alert"},this.state.message)),r.a.createElement(k.a,{style:{display:"none"},ref:function(t){e.checkBtn=t}}))))}}]),t}(n.Component),C=a(54),U=function(e){if(!e)return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"This field is required!")},x=function(e){if(!Object(C.isEmail)(e))return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"This is not a valid email.")},P=function(e){if(e.length<2||e.length>20)return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"The username must be between 2 and 20 characters.")},D=function(e){if(e.length<4||e.length>40)return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"The password must be between 4 and 40 characters.")},L=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleRegister=a.handleRegister.bind(Object(d.a)(a)),a.onChangeUsername=a.onChangeUsername.bind(Object(d.a)(a)),a.onChangeEmail=a.onChangeEmail.bind(Object(d.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(d.a)(a)),a.state={username:"",email:"",password:"",successful:!1,message:""},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleRegister",value:function(e){var t=this;e.preventDefault(),this.setState({message:"",successful:!1}),this.form.validateAll(),0===this.checkBtn.context._errors.length&&E.register(this.state.username,this.state.email,this.state.password).then((function(e){t.setState({message:e.data.message,successful:!0})}),(function(e){var a=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();t.setState({successful:!1,message:a})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"card card-container"},r.a.createElement("img",{src:"https://www.kindpng.com/picc/m/78-785827_user-profile-avatar-login-account-male-user-icon.png",alt:"profile-img",className:"profile-img-card"}),r.a.createElement(N.a,{onSubmit:this.handleRegister,ref:function(t){e.form=t}},!this.state.successful&&r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement(w.a,{type:"text",className:"form-control",name:"username",value:this.state.username,onChange:this.onChangeUsername,validations:[U,P]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement(w.a,{type:"text",className:"form-control",name:"email",value:this.state.email,onChange:this.onChangeEmail,validations:[U,x]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement(w.a,{type:"password",className:"form-control",name:"password",value:this.state.password,onChange:this.onChangePassword,validations:[U,D]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block"},"Sign Up"))),this.state.message&&r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:this.state.successful?"alert alert-success":"alert alert-danger",role:"alert"},this.state.message)),r.a.createElement(k.a,{style:{display:"none"},ref:function(t){e.checkBtn=t}}))))}}]),t}(n.Component),R=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={content:""},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setState({content:"Welcome to Garage Management system"})}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("header",{className:"jumbotron"},r.a.createElement("h3",null,this.state.content)))}}]),t}(n.Component),F=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={redirect:null,userReady:!1,currentUser:{username:""}},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=E.getCurrentUser();e||this.setState({redirect:"/home"}),this.setState({currentUser:e,userReady:!0})}},{key:"render",value:function(){if(this.state.redirect)return r.a.createElement(v.a,{to:this.state.redirect});var e=this.state.currentUser;return r.a.createElement("div",{className:"container"},this.state.userReady?r.a.createElement("div",{className:"jumbotron"},r.a.createElement("header",null,r.a.createElement("h3",null,r.a.createElement("strong",null,e.username)," Profile")),r.a.createElement("p",null,r.a.createElement("strong",null,"Id:")," ",e.id),r.a.createElement("p",null,r.a.createElement("strong",null,"Email:")," ",e.email)):null)}}]),t}(n.Component),T=a(24);function B(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken?{Authorization:"Bearer "+e.accessToken}:{}}var I=new(function(){function e(){Object(o.a)(this,e)}return Object(i.a)(e,[{key:"newService",value:function(e,t,a){return f.a.post("http://localhost:8080/services",{serviceName:e,serviceDescription:t,price:a},{headers:B()})}},{key:"getServies",value:function(){return f.a.get("http://localhost:8080/services",{headers:B()})}},{key:"deleteService",value:function(e){return f.a.delete("http://localhost:8080/services/"+e,{headers:B()})}}]),e}()),A=function(e){var t=e.service,a=t.id,s=t.serviceName,l=t.serviceDescription,c=t.price,o=Object(n.useState)(!1),i=Object(T.a)(o,2),m=i[0],u=i[1];return r.a.createElement("div",{className:"card mb-2"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h4",null,s,r.a.createElement("button",{className:"fa fa-times",style:{cursor:"pointer",float:"right",color:"red"},onClick:function(){return function(e){console.log(e),I.deleteService(e)}(a)}},"DEL"),r.a.createElement("button",{className:"fa fa-sort-down mr-5",style:{cursor:"pointer",float:"right"},onClick:function(){return u(!m)}},"Details"))),m&&r.a.createElement("div",{className:"card-body"},r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},"Description: ",l),r.a.createElement("li",{className:"list-group-item"},"Price: ",c))))},J=function(){var e=Object(n.useState)([]),t=Object(T.a)(e,2),a=t[0],s=t[1];return Object(n.useEffect)((function(){I.getServies().then((function(e){return s(e.data)}))}),[]),r.a.createElement(r.a.Fragment,null,a.map((function(e){return r.a.createElement(A,{key:e.id,service:e})})))},M={on:function(e,t){document.addEventListener(e,(function(e){return t(e.detail)}))},dispatch:function(e,t){document.dispatchEvent(new CustomEvent(e,{detail:t}))},remove:function(e,t){document.removeEventListener(e,t)}},W=function(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null),a=Object(n.useRef)(null);return r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"card card-container"},r.a.createElement("form",{onSubmit:function(n){n.preventDefault(),I.newService(e.current.value,t.current.value,a.current.value)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Service name"),r.a.createElement("input",{type:"text",className:"form-control",ref:e})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Service Description"),r.a.createElement("input",{type:"text",className:"form-control",ref:t})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Price"),r.a.createElement("input",{type:"text",className:"form-control",ref:a})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block"},r.a.createElement("span",null,"Add Service"))))))},_=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).logOut=a.logOut.bind(Object(d.a)(a)),a.state={currentUser:void 0},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=E.getCurrentUser();t&&this.setState({currentUser:t}),M.on("logout",(function(){e.logOut()}))}},{key:"componentWillUnmount",value:function(){M.remove("logout")}},{key:"logOut",value:function(){E.logout(),this.setState({currentUser:void 0})}},{key:"render",value:function(){var e=this.state.currentUser;return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand navbar-dark bg-secondary"},r.a.createElement(c.b,{to:"/",className:"navbar-brand"},"Garage Management System"),r.a.createElement("div",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(c.b,{to:"/home",className:"nav-link"},"Home")),e&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(c.b,{to:"/service",className:"nav-link"},"Services")),e&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(c.b,{to:"/service/add",className:"nav-link"}," Add Services"))),e?r.a.createElement("div",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(c.b,{to:"/profile",className:"nav-link"},e.username)),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"/login",className:"nav-link",onClick:this.logOut},"LogOut"))):r.a.createElement("div",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(c.b,{to:"/login",className:"nav-link"},"Login")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(c.b,{to:"/register",className:"nav-link"},"Sign Up")))),r.a.createElement("div",{className:"container mt-3"},r.a.createElement(v.d,null,r.a.createElement(v.b,{exact:!0,path:["/","/home"],component:R}),r.a.createElement(v.b,{exact:!0,path:"/login",component:S}),r.a.createElement(v.b,{exact:!0,path:"/register",component:L}),r.a.createElement(v.b,{exact:!0,path:"/profile",component:F}),r.a.createElement(v.b,{exact:!0,path:"/service",component:J}),r.a.createElement(v.b,{exact:!0,path:"/service/add",component:W}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(c.a,null,r.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},57:function(e,t,a){e.exports=a(153)},64:function(e,t,a){}},[[57,1,2]]]);
//# sourceMappingURL=main.54b9bcf0.chunk.js.map